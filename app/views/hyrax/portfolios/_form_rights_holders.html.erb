<div class="form-group" data-behavior="rights-holders"
     data-holders="<%= @form.model.rights_holders.to_json %>">
  <label>Rights Holders</label>
  <p class="help-text">Document complex ownership and rights structures</p>

  <button type="button" class="btn btn-secondary" data-behavior="add-holder">
    <i class="fa fa-plus"></i> Add Rights Holder
  </button>

  <table class="table table-striped mt-3">
    <thead>
      <tr>
        <th>Entity Name</th>
        <th>Type</th>
        <th>Role</th>
        <th>Percentage</th>
        <th>Cultural Context</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody class="holders-tbody"></tbody>
  </table>
</div>

<script type="text/x-tmpl" id="tmpl-rights-holder">
  <tr>
    <td>
      <input type="text" name="portfolio[rights_holders][][entity_name]"
             class="form-control" placeholder="Name" required />
    </td>
    <td>
      <select name="portfolio[rights_holders][][entity_type]" class="form-control" required>
        <option value="">Select Type...</option>
        <option value="individual">Individual</option>
        <option value="collective">Collective</option>
        <option value="community">Community</option>
        <option value="institution">Institution</option>
        <option value="estate">Estate</option>
      </select>
    </td>
    <td>
      <select name="portfolio[rights_holders][][entity_role]" class="form-control" required>
        <option value="">Select Role...</option>
        <option value="creator">Creator</option>
        <option value="co-creator">Co-Creator</option>
        <option value="contributor">Contributor</option>
        <option value="cultural_authority">Cultural Authority</option>
        <option value="rights_holder">Rights Holder</option>
        <option value="traditional_knowledge_holder">Traditional Knowledge Holder</option>
      </select>
    </td>
    <td>
      <input type="number" name="portfolio[rights_holders][][rights_percentage]"
             class="form-control" min="0" max="100" step="0.1" placeholder="%" />
    </td>
    <td>
      <input type="text" name="portfolio[rights_holders][][cultural_context]"
             class="form-control" placeholder="Cultural context (optional)" />
    </td>
    <td>
      <button type="button" class="btn btn-danger btn-sm" data-behavior="remove-holder">
        <i class="fa fa-trash"></i>
      </button>
    </td>
  </tr>
</script>
