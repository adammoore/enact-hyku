# ENACT Hyku - Digital Ocean Environment Variables Template
# These variables are used for Digital Ocean App Platform deployment

# === REQUIRED Configuration ===

# Rails Configuration
RAILS_ENV=production
RAILS_LOG_TO_STDOUT=true
RAILS_SERVE_STATIC_FILES=true
SECRET_KEY_BASE=generate_with_rails_secret_or_openssl_rand

# Hyku Multi-tenancy Configuration
HYKU_ADMIN_HOST=${APP_DOMAIN}
HYKU_ROOT_HOST=${APP_DOMAIN}
HYKU_MULTITENANT=true
HYKU_ADMIN_ONLY_TENANT_CREATION=true

# Database (Automatically set by Digital Ocean managed database)
# DATABASE_URL=postgresql://user:pass@host:port/dbname

# Redis (Automatically set by Digital Ocean managed Redis)
# REDIS_URL=redis://host:port

# === INTERNAL SERVICES (Auto-configured in App Platform) ===

# Fedora Repository (running as internal service)
FEDORA_URL=http://fcrepo:8080/fcrepo/rest

# Solr Search Index (running as internal service)
SOLR_URL=http://solr:8983/solr/hyku

# === FILE STORAGE (REQUIRED) ===

# Digital Ocean Spaces (S3-compatible) or AWS S3
# For DO Spaces:
AWS_ACCESS_KEY_ID=your_spaces_access_key
AWS_SECRET_ACCESS_KEY=your_spaces_secret_key
AWS_REGION=nyc3
AWS_BUCKET=enact-hyku-production
# For DO Spaces, also set:
S3_ENDPOINT=https://nyc3.digitaloceanspaces.com
S3_HOSTNAME=nyc3.digitaloceanspaces.com

# === EMAIL CONFIGURATION (RECOMMENDED) ===

# SMTP Configuration (use SendGrid, Mailgun, or similar)
SMTP_ADDRESS=smtp.sendgrid.net
SMTP_PORT=587
SMTP_DOMAIN=yourdomain.com
SMTP_USER_NAME=apikey
SMTP_PASSWORD=your_sendgrid_api_key
SMTP_AUTHENTICATION=plain
SMTP_ENABLE_STARTTLS_AUTO=true

# Email sender address
HYKU_CONTACT_EMAIL=repository@yourdomain.com
HYKU_CONTACT_EMAIL_TO=admin@yourdomain.com

# === OPTIONAL Services ===

# Google Analytics
# GOOGLE_ANALYTICS_ID=UA-XXXXXXXXX-X

# GeoNames for location autocomplete (register at geonames.org)
# GEONAMES_USERNAME=your_geonames_username

# ORCID Integration (register at orcid.org)
# ORCID_CLIENT_ID=your_client_id
# ORCID_CLIENT_SECRET=your_client_secret

# DOI Service (DataCite or similar)
# DATACITE_MODE=production
# DATACITE_PREFIX=10.12345
# DATACITE_USERNAME=your_datacite_username
# DATACITE_PASSWORD=your_datacite_password

# === WORKER CONFIGURATION ===

# Sidekiq workers (number of threads)
SIDEKIQ_CONCURRENCY=5

# === PERFORMANCE & SCALING ===

# Puma web server configuration
WEB_CONCURRENCY=2
RAILS_MAX_THREADS=5

# === SECURITY ===

# Force SSL in production
FORCE_SSL=true

# === Digital Ocean Specific ===

# App domain (automatically set by DO App Platform)
# APP_DOMAIN=enact-hyku-xxxxx.ondigitalocean.app

# Container registry (for custom builds)
# DOCKER_REGISTRY=registry.digitalocean.com/enact-hyku
